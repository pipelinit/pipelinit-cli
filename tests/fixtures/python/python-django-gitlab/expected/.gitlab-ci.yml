# Generated with pipelinit 0.2.2
# https://pipelinit.com/
stages:
  - lint
  - format
  - sast
  - test

.lint:
  stage: lint
  image: python:3.6.10

  needs: []
  script:
    - echo "Starting the Lint stage"
  only:
    refs:
      - branches
    changes:
      - "**/*.py"

.format:
  stage: format
  image: python:3.6.10

  needs: []
  script:
    - echo "Starting the Format stage"
  only:
    refs:
      - branches
    changes:
      - "**/*.py"

.sast:
  stage: sast
  image: returntocorp/semgrep-agent:v1
  needs: ["format", "lint"]
  script:
    - echo "Starting the SAST stage"
  only:
    refs:
      - branches
    changes:
      - "**/*.py"

.test:
  stage: test
  image: python:3.6.10

  needs: ["format", "lint"]
  script:
    - echo "Starting the Test stage"
  only:
    refs:
      - branches
    changes:
      - "**/*.py"

include:
  - local: ".gitlab-ci/pipelinit.python.lint.yaml"
  - local: ".gitlab-ci/pipelinit.python.format.yaml"
  - local: ".gitlab-ci/pipelinit.python.test.yaml"
  - local: ".gitlab-ci/pipelinit.python.sast.yaml"
